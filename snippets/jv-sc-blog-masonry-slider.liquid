{% assign blogDataId = "sc_blog_masonry_slider" %}

{% capture blog_handle %}{{blogDataId}}_handle{%endcapture%}
{% capture blog_heading %}{{blogDataId}}_heading{%endcapture%}
{% capture blog_heading_style %}{{blogDataId}}_heading_style{%endcapture%}
{% capture blog_subheading %}{{blogDataId}}_subheading{%endcapture%}
{% capture blog_limit %}{{blogDataId}}_limit{%endcapture%}


{% capture blog_color_custom_enable %}{{blogDataId}}_color_custom_enable{%endcapture%}
{% capture blog_show_title %}{{blogDataId}}_show_title{%endcapture%}
{% capture blog_show_desc %}{{blogDataId}}_show_desc{%endcapture%}

{% assign blogs_list_grids = settings[blog_handle] %}
{% assign limit_item = settings[blog_limit] | plus: 0 %}
{% assign blog = blogs[blogs_list_grids] %}

{% assign item_per_slide = 6 %}

<div class="popular-post-masonry slider-owl-single-item-paging-nolazyload">
  <div class="container">

   {%include 'jv-sc-heading-box' with heading_enable: settings[blog_heading], heading_style:settings[blog_heading_style], heading_title: settings[blog_heading], heading_subtitle: settings[blog_subheading] %}

    <div class="paginav-slider">
      <div class="wrap-item">

          <div class="item masonry-container">
 
              {% for article in blog.articles limit:limit_item %}
            
                <div class="itemMasonry col-md-3 {%if forloop.last%} last {%endif%}">

                  <div class="popular-box">
                    <div class="popular-box-thumb">

                      {% assign image_alt = article.title | escape %}
                      {% if article.image %}
                        {{ article | img_url: '1024x1024' | img_tag: image_alt, 'article__image' | link_to: article.url }}
                      {% else %}
                       <img src="{{ 'jv_noimage.jpg' | asset_url }}" alt="jv_noimage.jpg"/>
                      {% endif %}
                    </div>
                    
                    {%if settings[blog_show_title] or settings[blog_show_desc] %}
                    <div class="popular-box-text {%if settings[blog_color_custom_enable] %}blog__color--custom{%endif%}">
                      {%if settings[blog_show_title]%}
                      <h2 class="title-popular-box"><a href="{{ article.url }}"><span>{{ article.title }}</span></a></h2>
                      {% endif %}
                      {% if article.content != blank and settings[blog_show_desc] %}
                      <div class="desc-popular-box">{{ article.content | strip_html  | truncate: 40 }}</div>
                      {% endif %}
                    </div>
                    {% endif %}

                  </div>

                </div>
                <!-- end itemMasonry -->

                {%assign test =  forloop.index | modulo:item_per_slide %}
                {% if test == 0 %}
                  {{'</div>'}}
                  {%if forloop.last == false %}
                  <!-- open new item -->
                    {{'<div class="item masonry-container">'}}
                  {% endif %}
                {% endif %}

              {% endfor %}
       
          </div>
          <!-- item masonry-container -->
      </div> 
      <!-- wrap-item -->
    </div>
  </div>
</div>
<!-- End Popular Post -->
<style type="text/css">
  .popular-post-masonry .itemMasonry:nth-child(3),
  .popular-post-masonry .itemMasonry:nth-child(4) {
    width: 50%;
  }
</style>


<script language="javascript">
jQuery(function($){
  var $container = $('.masonry-container').imagesLoaded(function(){
    $container.masonry({
    
    itemSelector: '.itemMasonry'
    });
  });

  // var $container = $('.masonry-container').masonry({
    
  //   itemSelector: '.itemMasonry'
  //   });

});
</script>