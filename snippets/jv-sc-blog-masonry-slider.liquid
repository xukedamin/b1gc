{% assign blog_title = settings.home_blog_title %}
{% assign blog_text = settings.home_blog_text %}

{% assign blogs_list_grids = settings.home_blog %}
{% assign limit_item = settings.home_blog_number | plus: 0 %}

{% assign blog = blogs[blogs_list_grids] %}

<div class="popular-post-masonry slider-5-items">
  <div class="container">
    <div class="box-intro">
      {% if blog_title != blank %}
      <h2><span class="title">{{ blog_title }}</span></h2>
      {% endif %}
      {% if blog_text != blank %}
      <span class="desc-title">{{ blog_text }}</span>
      {% endif %}
    </div>
    <div class="paginav-slider">

      <div class="wrap-item">

           {% assign offset = 0 %}
           {% assign item_per_slide = 6 %}
           {% assign slides = blog.articles_count| divide: item_per_slide %}

          {% for i in (1..slides) %}
      
          {%if i == 1 or i == item_per_slide + 1 %}
          <div class="item masonry-container">
          {%endif %}


           {% for i in (1..item_per_slide) %}
           {%if offset < blog.articles_count and  offset < 20 %}
              {% assign j = 1 %}
              
              {% for article in blog.articles limit:item_per_slide offset:offset %}
                  {% assign class_col = 'col-md-3' %}
                  {% if j == 3 or j == 4  %}
                    {% assign class_col = 'col-md-6' %}
                  {% endif %}
              
                  <div class="itemMasonry {{class_col}}">

                    <div class="popular-box mini-box 1OR_large-box ">
                      <div class="popular-box-thumb">
                        <a href="#">
                           {{ article | img_url: '1024x1024' | img_tag: image_alt, 'article__image' | link_to: article.url }}
                        </a>
                      </div>
                      <div class="popular-box-text">
                        <h2 class="title-popular-box"><a href="{{ article.url }}"><span>{{ article.title }}</span></a></h2>
                        <div class="desc-popular-box"><span>{{ article.excerpt | truncate: 40 }}</span></div>
                      </div>
                    </div>
                      

                {% assign j = j | plus:1 %}
              </div>
            <!-- end itemMasonry -->

               {% endfor %}
             {% endif %}
             
              {% assign offset = offset | plus:item_per_slide %}
              {% endfor %}
       
          {% if i == item_per_slide or forloop.last %}
          </div>
          {% endif %}
          <!-- item masonry-container -->
          
          {% endfor %}
         



      </div> 
      <!-- wrap-item -->
      
    </div>
  </div>
</div>
<!-- End Popular Post -->


<script language="javascript">
jQuery(function($){
  var $container = $('.masonry-container').imagesLoaded(function(){
    $container.masonry({
    
    itemSelector: '.itemMasonry'
    });
  });
});
</script>